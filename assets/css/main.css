:root{
  --bg:#0b0b0d;
  --card:#141016;
  --card-2:#19121b;
  --text:#f2f3f5;
  --muted:#b8bcc5;
  --accent:#be0f2e;     /* primary red */
  --accent-2:#ff4d4f;   /* brighter red */
  --border:#2a1b20;
  --code-bg:#0a0709;
  --container-max: 1368px;
  --content-max: 110ch;
  --radius-lg: 16px;
  --radius-md: 12px;
  --radius-sm: 10px;
  --shadow-lg: 0 20px 60px rgba(0,0,0,.45);
  --shadow-md: 0 12px 32px rgba(0,0,0,.35);
}

*{box-sizing:border-box}
html,body{ height:100% }
html{scroll-behavior:smooth}
body{
  margin:0; font: 16px/1.6 system-ui, -apple-system, Segoe UI, Roboto, Inter, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji";
  background: radial-gradient(1200px 600px at 20% -10%, rgba(190,15,46,.08), transparent 60%),
              radial-gradient(900px 400px at 100% 0%, rgba(255,77,79,.06), transparent 65%),
              var(--bg);
  color:var(--text);
}

a{ color:var(--accent); text-decoration:none }
a:hover{ text-decoration:underline }

.container{ max-width: var(--container-max); margin: 0 auto; padding: 1.4rem 1.2rem }

/* Header */
header.site{ position: sticky; top:0; z-index:10; background: rgba(11,11,13,.72); backdrop-filter: blur(10px); border-bottom:1px solid var(--border) }
.header-inner{ display:flex; align-items:center; justify-content:space-between; gap:1rem }
.brand{ display:flex; align-items:center; gap:.8rem; font-weight:700 }
.brand .logo{ height:34px; display:block; filter: drop-shadow(0 2px 10px rgba(190,15,46,.25)); }
.brand .tagline{ color:var(--muted); font-weight:500; font-size:.95rem }

header nav{ display:flex; gap:1rem; align-items:center }
header nav a{ padding:.45rem .75rem; border-radius:10px; border:1px solid transparent; font-weight:600; color:var(--text) }
header nav a:hover{ background: linear-gradient(180deg, rgba(255,77,79,.08), rgba(0,0,0,.08)); border-color:var(--border); text-decoration:none }

/* Footer */
footer.site{ border-top:1px solid var(--border); color:var(--muted); }
footer .row{ display:flex; align-items:center; gap:1rem; justify-content:space-between; flex-wrap:wrap }
.small{ font-size:.9rem; color:var(--muted) }

/* Hero */
.hero{ margin-top:1.2rem; background: linear-gradient(180deg, rgba(255,77,79,.06), rgba(0,0,0,.12)); padding:2rem; border-radius:var(--radius-lg); border:1px solid var(--border); box-shadow: var(--shadow-md) }
.hero h1{ margin:.2rem 0 0; font-size: clamp(1.8rem, 2vw + 1rem, 2.6rem); letter-spacing:.3px }
.hero p{ margin:.5rem 0 0; color:var(--muted) }
.hero .bar{ margin-top:1rem; display:flex; gap:.5rem; flex-wrap:wrap }
.pill{ display:inline-flex; align-items:center; gap:.4rem; padding:.28rem .6rem; border:1px solid var(--border); border-radius:999px; font-size:.85rem; color:var(--muted); background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.14)) }
.pill::before{ content:"#"; color:var(--accent-2) }

/* Grid of posts */
.grid{ display:grid; grid-template-columns: 1fr; gap:1rem; margin: 1.2rem 0 0 }
@media (min-width: 800px){ .grid{ grid-template-columns: repeat(2, minmax(0,1fr)) } }
@media (min-width: 1200px){ .grid{ grid-template-columns: repeat(3, minmax(0,1fr)) } }

.card{
  display:block; padding:1.1rem 1.1rem; background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.20));
  border:1px solid var(--border); border-radius: var(--radius-md);
  transition: transform .18s ease, box-shadow .22s ease, border-color .2s ease;
}
.card:hover{ transform: translateY(-4px); box-shadow: var(--shadow-md); border-color: rgba(255,77,79,.30) }
.card .eyebrow{ display:flex; align-items:center; gap:.5rem; margin-bottom:.45rem; font-size:.85rem; color:var(--muted) }
.tag{ display:inline-block; padding:.08rem .45rem; border-radius:999px; border:1px solid var(--border); color:var(--muted); font-size:.75rem; background: rgba(190,15,46,.10) }
.card .title{ font-weight:800; font-size:1.22rem; margin:.15rem 0 .2rem }
.card .desc{ color:var(--muted) }

/* Post layout */
.page-title{ font-size: clamp(1.9rem, 1.15rem + 2vw, 2.6rem); margin: .2rem 0 1rem }
.post .meta{ display:flex; gap:.6rem .8rem; align-items:center; flex-wrap:wrap; color:var(--muted) }
.post .chip{ display:inline-flex; align-items:center; gap:.35rem; padding:.24rem .6rem; border:1px solid var(--border); border-radius:999px; background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.14)) }
.post-grid{ display:grid; grid-template-columns: 1fr; gap:2rem }
@media (min-width: 1100px){ .post-grid{ grid-template-columns: 2.2fr 1fr } }
.post-body{ max-width: var(--content-max) }
.post-body img{ max-width:100%; height:auto; border-radius:12px; border:1px solid var(--border) }
.post-body pre, .post-body code{ font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace }
.post-body pre{ background:var(--code-bg); border:1px solid var(--border); padding:1rem; border-radius:14px; overflow:auto; box-shadow: inset 0 0 0 1px rgba(255,255,255,.02) }
.post-body code{ background: rgba(190,15,46,.12); padding:.12rem .35rem; border-radius:6px; border:1px solid rgba(190,15,46,.22) }
blockquote{ margin:1rem 0; padding:.5rem 1rem; border-left:3px solid var(--accent); color:#f6d4da; background:linear-gradient(180deg, rgba(190,15,46,.12), rgba(0,0,0,.08)); border-radius:0 12px 12px 0 }

/* Table of contents */
.toc{ position:sticky; top:90px; height:max-content; border:1px solid var(--border); border-radius:14px; padding:1rem; background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.18)) }
.toc h3{ margin:0 0 .75rem; font-size:1rem }
.toc ul{ list-style:none; padding:0; margin:0; display:grid; gap:.4rem }
.toc a{ color:var(--muted) }
.toc a:hover{ color:var(--text); text-decoration:none }
.toc .toc-h2{ font-weight:700 }
.toc .toc-h3{ margin-left:.5rem; opacity:.9 }

/* Utilities */
.muted{ color:var(--muted) }
hr{ border:0; border-top:1px solid var(--border); margin:2rem 0 }
kbd{ background:var(--card-2); border:1px solid var(--border); padding:.06rem .35rem; border-radius:6px }

/* Reveal */
.reveal{ opacity:0; transform: translateY(6px); transition: opacity .35s ease, transform .35s ease }
.reveal.is-in{ opacity:1; transform:none }



/* Brand logo only */
.brand .logo{ height:56px; display:block; }
@media (min-width: 1000px){ .brand .logo{ height:68px } }

/* Fancy underline on nav */
header nav a{ position:relative; overflow:hidden }
header nav a::after{
  content:""; position:absolute; left:10%; bottom:8px; width:0; height:2px; background:var(--accent);
  transition: width .25s ease; border-radius:2px;
}
header nav a:hover::after{ width:80% }

/* Card sheen on hover */
.card{ position:relative }
.card::before{
  content:""; position:absolute; inset:-1px; pointer-events:none; border-radius:inherit;
  background: radial-gradient(600px 200px at -10% -10%, rgba(255,77,79,.14), transparent 40%);
  opacity:.0; transition: opacity .25s ease;
}
.card:hover::before{ opacity:1 }

/* Rouge syntax highlighting (One Dark-ish with red accent) */
.highlight{ background: var(--code-bg); border:1px solid var(--border); border-radius:14px; overflow:auto; box-shadow: inset 0 0 0 1px rgba(255,255,255,.02) }
.highlight pre{ margin:0; padding:1rem 1.2rem; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace; font-size:.95rem; line-height:1.5 }
.highlight .hll{ background-color:#2c313c }
.highlight .c{ color:#7f848e } /* Comment */
.highlight .err{ color:#f28b82 } /* Error */
.highlight .k{ color:#c678dd } /* Keyword */
.highlight .l{ color:#e5c07b } /* Literal */
.highlight .n{ color:#e6edf3 } /* Name */
.highlight .o{ color:#56b6c2 } /* Operator */
.highlight .p{ color:#e6edf3 } /* Punctuation */
.highlight .cm{ color:#7f848e } .highlight .cp{ color:#7f848e } .highlight .c1{ color:#7f848e } .highlight .cs{ color:#7f848e }
.highlight .gd{ color:#f28b82 } .highlight .ge{ font-style: italic } .highlight .gr{ color:#e06c75 } .highlight .gh{ color:#61afef }
.highlight .gi{ color:#98c379 } .highlight .go{ color:#abb2bf } .highlight .gp{ color:#61afef } .highlight .gs{ font-weight: bold } .highlight .gu{ color:#61afef }
.highlight .kc{ color:#c678dd } .highlight .kd{ color:#c678dd } .highlight .kn{ color:#c678dd } .highlight .kp{ color:#c678dd } .highlight .kr{ color:#c678dd } .highlight .kt{ color:#c678dd }
.highlight .ld{ color:#e5c07b } .highlight .m{ color:#e5c07b } .highlight .s{ color:#98c379 } .highlight .na{ color:#e6edf3 } .highlight .nb{ color:#61afef } .highlight .nc{ color:#e6edf3 }
.highlight .no{ color:#d19a66 } .highlight .nd{ color:#61afef } .highlight .ni{ color:#e06c75 } .highlight .ne{ color:#e06c75 } .highlight .nf{ color:#61afef }
.highlight .nl{ color:#e6edf3 } .highlight .nn{ color:#e6edf3 } .highlight .nx{ color:#e6edf3 } .highlight .py{ color:#e6edf3 } .highlight .nt{ color:#e06c75 }
.highlight .nv{ color:#e6edf3 } .highlight .ow{ color:#56b6c2 } .highlight .w{ color:#abb2bf }
.highlight .sc{ color:#98c379 } .highlight .sd{ color:#98c379 } .highlight .si{ color:#98c379 } .highlight .sr{ color:#98c379 } .highlight .ss{ color:#98c379 }
.highlight .bp{ color:#61afef } .highlight .vc{ color:#e6edf3 } .highlight .vg{ color:#e6edf3 } .highlight .vi{ color:#e6edf3 }
.highlight .il{ color:#e5c07b }

/* Inline code remains with red accent */
.post-body code{ background: rgba(190,15,46,.12); border:1px solid rgba(190,15,46,.22) }

/* Terminal hero grid (attacker â†” target) restored */
.term-grid{ display:grid; grid-template-columns: 1fr; gap:1rem; margin-top:1rem }
@media (min-width: 900px){ .term-grid{ grid-template-columns: 1fr 1fr } }
.hero-term{ border:1px solid var(--border); border-radius:12px; background:var(--code-bg); padding:1rem; box-shadow: inset 0 0 0 1px rgba(255,255,255,.02) }
.hero-term .line{ white-space:pre; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace }
.hero-term .prompt{ color:#ff6b6b }    /* attacker prompt in red */
.hero-term .role{ color:#41d692 }      /* victim prompt in green */
.hero-term .cursor{ display:inline-block; width:8px; height:1.05em; vertical-align:bottom; background:#e6edf3; animation: blink 1s steps(1) infinite; margin-left:2px }
@keyframes blink{ 50%{ opacity:0 } }

/* Monospace across all elements */
h1,h2,h3,h4,h5,h6,button,input,textarea,select{ font-family: inherit }
code,kbd,samp,pre{ font-family: inherit }

/* Keep header height, visually scale logo without affecting layout */
header.site{ --header-h: 54px }
.brand .logo{ height:40px; transform: scale(2.4); transform-origin:left center; }
@media (min-width: 1000px){ .brand .logo{ height:40px; transform: scale(2.4) } }

/* No background shading behind code blocks */
.post-body pre, .highlight{ background: transparent !important; box-shadow: none !important; }
.post-body pre{ border:1px solid var(--border); border-radius:14px; padding:1rem; }
.highlight pre{ background: transparent !important; }

/* === Global monospace === */
:root{ --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace }
html, body, *:not(svg):not(path){ font-family: var(--font-mono) !important; letter-spacing: 0 }

/* Keep header height, scale logo visually */
header.site{ --header-h: 54px }

/* === Remove ANY background from code areas (Rouge/Markdown) === */
.highlight, .rouge-table, .rouge-table td, .rouge-table pre, pre.highlight, .highlight pre, .highlight code, .post-body pre, .post-body code{
  background: transparent !important;
  box-shadow: none !important;
}
.post-body code{ border:0 !important; padding:0 !important }
.post-body pre{ border:1px solid var(--border); border-radius:14px; padding:1rem }
.highlight{ border:1px solid var(--border); border-radius:14px }

/* Terminal hero visuals */
.hero-term{ border:1px solid var(--border); border-radius:12px; padding:1rem }
.hero-term .line{ margin:0; white-space:pre-wrap }
.hero-term .cursor{ display:inline-block; width:8px; height:1.1em; vertical-align:bottom; background:#e6edf3; animation: blink 1s steps(1) infinite; margin-left:2px }
@keyframes blink{ 50%{ opacity:0 } }


/* Prism overrides - transparent bg + Razor palette */
pre[class*="language-"], code[class*="language-"]{ background: transparent !important; text-shadow:none !important }
.token.comment,.token.prolog,.token.doctype,.token.cdata{ color:#7f848e }
.token.punctuation{ color:#e6edf3 }
.token.property,.token.tag,.token.constant,.token.symbol,.token.deleted{ color:#ff6b6b }
.token.boolean,.token.number{ color:#e5c07b }
.token.selector,.token.attr-name,.token.string,.token.char,.token.builtin,.token.inserted{ color:#98c379 }
.token.operator,.token.entity,.token.url{ color:#56b6c2 }
.token.atrule,.token.attr-value,.token.keyword{ color:#c678dd }
.token.function,.token.class-name{ color:#61afef }
.token.regex,.token.important,.token.variable{ color:#d19a66 }

/* Terminal colors per panel */
.hero-term.attacker .prompt.red{ color:#ff6b6b }
.hero-term.victim .prompt.green{ color:#41d692 }
.hero-term.attacker .term-text{ color:#bfe6ff }
.hero-term.victim  .term-text{ color:#b8f8c6 }

/* Terminal colorization */
.hero-term.attacker .prompt.red{ color:#ff6b6b }
.hero-term.victim  .prompt.green{ color:#41d692 }
.hero-term.attacker .term-text{ color:#bfe6ff }
.hero-term.victim  .term-text{ color:#b8f8c6 }

/* Ensure transparent code backgrounds */
pre[class*="language-"], code[class*="language-"], .highlight, .post-body pre, .post-body code {
  background: transparent !important;
  box-shadow: none !important;
}


/* ===== Razor Prism (NASM-focused) ===== */
pre[class*="language-"], code[class*="language-"]{ background: transparent !important; text-shadow:none !important; }
.language-nasm .token.comment { color:#7f848e }
.language-nasm .token.keyword { color:#ff5c5c; font-weight:700 }   /* mnemonics, directives */
.language-nasm .token.register { color:#7aa2f7 }                   /* rax, rdi, etc. */
.language-nasm .token.number { color:#e5c07b }
.language-nasm .token.string { color:#98c379 }
.language-nasm .token.operator, .language-nasm .token.punctuation { color:#cbd5e1 }
.language-nasm .token.label, .language-nasm .token.symbol { color:#d19a66 }
.language-nasm .token.constant { color:#bd93f9 }
.language-nasm .token.variable { color:#e6edf3 }

/* Subtle underline for code labels */
.language-nasm .token.label { text-decoration: underline dotted rgba(255,255,255,.25) }

/* ===== Animations ===== */
@keyframes fadeUp { from{opacity:0; transform: translateY(8px)} to{opacity:1; transform:none} }
.reveal{ opacity:0; transform: translateY(8px); transition: opacity .4s ease, transform .4s ease }
.reveal.is-in{ opacity:1; transform:none }
.tilt-in{ will-change: transform; transform: perspective(800px) rotateX(2deg) translateY(6px); transition: transform .4s ease, box-shadow .4s ease }
.tilt-in.is-in{ transform: none }


/* ToC */
.toc{ position:sticky; top:90px; height:max-content; border:1px solid var(--border); border-radius:14px; padding:1rem; background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.18)) }
.toc h3{ margin:0 0 .75rem; font-size:1rem }
.toc ul{ list-style:none; padding:0; margin:0; display:grid; gap:.4rem }
.toc a{ color:var(--muted) } .toc a:hover{ color:var(--text); text-decoration:none }
.toc .toc-h2{ font-weight:700 } .toc .toc-h3{ margin-left:.5rem; opacity:.9 }

/* Reveal */
@keyframes fadeUp{ from{opacity:0; transform:translateY(8px)} to{opacity:1; transform:none} }
.reveal{ opacity:0; transform:translateY(8px); transition: opacity .4s ease, transform .4s ease }
.reveal.is-in{ opacity:1; transform:none }
.tilt-in{ transform: perspective(800px) rotateX(2deg) translateY(6px); transition: transform .4s ease, box-shadow .4s ease }
.tilt-in.is-in{ transform:none }

/* Terminals */
.hero-term{ border:1px solid var(--border); border-radius:12px; padding:1rem }
.hero-term .line{ margin:0; white-space:pre-wrap }
.hero-term .cursor{ display:inline-block; width:8px; height:1.1em; vertical-align:bottom; background:#e6edf3; animation: blink 1s steps(1) infinite; margin-left:2px }
@keyframes blink{ 50%{ opacity:0 } }
.hero-term.attacker .prompt.red{ color:#ff6b6b }
.hero-term.victim  .prompt.green{ color:#41d692 }
.hero-term.attacker .term-text{ color:#bfe6ff }
.hero-term.victim  .term-text{ color:#b8f8c6 }

/* Code backgrounds */
pre[class*="language-"], code[class*="language-"], .highlight, .post-body pre, .post-body code {
  background: transparent !important; box-shadow:none !important;
}
